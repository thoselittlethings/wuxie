## 微信小程序开始

2018 年年初，接到了第一个有关微信小程序的项目。
当然，那个时候对于小程序开发并没有什么概念，但作为 21 世纪的青少年，不知道什么是搜索引擎是说不下去的。于是就去 [微信公众平台](https://mp.weixin.qq.com/)一游，其他的先不用顾及，先注册个账号留下足迹。之后就按照文档顺一遍，当然是要带着疑问去看。带着目的是做事，就不会出现 `我是谁？我在哪？我在干什么？` 这样的疑问。

>疑问

* 如何开发（涉及开发语言，开发环境、开发工具）
* 如何预览（涉及开发预览、调试）
* 如何部署（最终用户如何使用）

>解惑

* 开发语言 wxml wxss js, 开发环境、工具 微信开发工具
* 预览、调试 通过微信开发工具编译或预览在手机上体验
* 部署 上传代码，提交审核，审核通过，手动发布

当然，知道了这些还不够，快速学习的最好办法是临摹。

因为 17 年末的时候经常看 [蒙面唱将猜猜猜](https://y.qq.com/n/yqq/singer/000rbz4D2yROaH.html#tab=song&stat=y_new.album.header.singername)，加上之前学习 DOM操作 和 `jquery` 时做过一个简单的[音乐播放器](https://somethingaboutlearn.github.io/Music/)，所以就来了兴趣，临摹了 [QQ音乐](https://y.qq.com/m/index.html) 的移动端页面，做了一个小程序版。通过搜索和分析 `QQ音乐` 网页的 http 请求，拿到了移动端这几个页面的接口。这样，一个简单的小程序 demo 就出来了。

说起来就几分钟，但真正搞定这些东西就到周末了。接着就是着手开发，边看文档边开发。微信小程序的设计理念与 vue 很相似，提供了组件和 API 接口，需要什么就去找到对应的组件和接口，只需把精力集中在业务上，开发就像搭积木那样简单快捷。

前面这些工作可以看作是项目开发前的技术准备调研工作，之后就是需求分析，需求评审，出原型图，出 UI 图...等等。经历这一系列的反复协商后，拿到设计稿和切图，就着手搭积木，哦不，着手开发。根据设计稿搭出页面，因为页面少，而且那时候也没有组件的概念，就一个页面一个页面的搭建。我习惯在搭页面的时候，就用 [node](https://nodejs.org/) 起一个服务， mock 一些数据，如果开发之前 API 接口的格式定义的还行，后续的工作就只需稍微改动就可以了。

但我理想中的项目开发流程是这样的：先写组件（如果可以并且需要的话），先出 html ，跟 UI 美女确认无误后，再去做交互；交互完成后，交付产品确认流程上无误后，再交付 QA 测试，测试完成后，大家再一起确认无误后，就可以交于运维准备上线工作。

扯得有点远了，接着说这个小程序。我接到的这个项目是一个偏社交的问卷答题的小程序。

[普鲁斯特问卷](https://zh.wikipedia.org/wiki/%E6%99%AE%E9%B2%81%E6%96%AF%E7%89%B9%E9%97%AE%E5%8D%B7)，共有 28 道问题，这些问题的答案并不是固定的选项，而是开放式的回答。在这款小程序中，每个用户只有两次填写问卷的机会（完整版和命运版各一次机会）。分为两个不同的版本是考虑到让用户填写所有的问题有些困难，还有一个原因是多种玩法，增加问卷的趣味性。用户答题完成后，可以选择展示到广场，让每一个用户都可以看到；也可以选择生成一张海报分享给朋友或发送到朋友圈，来邀请更多的用户“拷问”灵魂。同时，也会邀请一些名家来填写问卷。

当然，每个项目都有一个长期维护的需求。比如，首页的 banner 要换，总不能再去修改代码，重新部署。所以，还需要一个运维系统。对于这个项目，这个运维系统就比较简单了，当然，你也可以做的很复杂。这都取决于需求。那这个项目的运维，就只需要修改 banner 的图片跳转链接；管理用户，对有非法的答案进行屏蔽；管理名人，向名人发送一个链接完成答案的录入。
开发这个项目的目的是为了在春节的时候，让大家有一个更好的拜年方式，~~如果可以将“吃了么您”换为“普鲁斯特问卷填了么您”就更好了~~。当然，也是为了让更多的人关注公众号，关注文学之美。所以，任务就比较紧急了。留给我开发的时间不多了，能否在最后的时间里保持项目没有 bug 上线，就显得格外的重要。不过情况也没有那么糟，一周页面，一周交互，一周接口测试，就搞定。按照这个计划，还会富裕出两周的时间来做缓冲。但也多亏有这两周的缓冲，才能在上线节点不推迟的情况下，修改或增加部分需求不延期。可见，预估时间的时候，给自己多一些冗余时间是多么的重要。

最后，当然在春节之前定点上线。这里忘记了说，微信小程序上线不用 web 网页似得解析个域名，部署到服务器上就 ok 。小程序虽然不用服务器（本文都站在前端的角度，不涉及后端），但使用别人的东西（腾讯的服务器），需要上传->提交->审核。既然有审核，就有通过和不通过。所以，为了保障审核的通过，一般都会采用版本控制的手法，也就是做一个公示类的页面，审核时是公示类的纯展示类页面；审核通过之后，就是项目的真实面目。所以，这块的版本号就显得格外的重要。当然，微信小程序的官方人员也会不定时的监测的，这只是确保准时上线交工，并不是交恶。